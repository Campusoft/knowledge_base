
Utilizar Oracle con framework abp


Instalar

- Oracle.EntityFrameworkCore
- Instalar en los Proyectos *. EntityFramework
      - Opcional. , *.test, *.web,  *.Migrator

- Connexiones.
	- appsettings.json
	- Configurar la cadena de conexión. 
	- El framework establece una cadena de conexión “defualt”, en el proyecto *.EntityFramework. DbContext. (Connection: Default). (Cambiar si se requiere)

Modificar clase <Schema.Proyecto>DbContextConfigurer. En el proyecto "<SchemaProyecto>.EntityFrameworkCore"
   Quitar SqlServer: 
   builder.UseSqlServer(connectionStr
ing);
   
   //Modificar
   builder. UseOracle (connectionString);

Configurar esquema 
https://docs.microsoft.com/en-us/ef/core/modeling/relational/default-schema

•	Cambios *.EntityFramework
o	Configurar el esquema. (Por defecto Entitity Framework tiene dbo). (Utilizar appsettings)
	Core.Database.Schema.Default
•	Ajustes en Oracle. En DbContext, sobreescribir el método OnModelCreating

o	El size de las propiedades, nombres de tablas, Oracle tiene restricción de 32.
o	Todo el objeto base de datos a mayúsculas. (Tablas, propiedades)
o	Aplicar políticas para convertir todos los nombres de tablas en mayúsculas. 

Utilizar el método, del proyecto “Campusoft.Core.EntityFrameworkCore” / OracleModelBuilderExtensions
modelBuilder.Fix(modelBuilder.Model.GetEntityTypes(), prefix);
 
o	Cambiar el prefijo de las tablas de Abp.  (utilizar appsetings)
	Core.Database.Table.Prefix

•	Eliminar todas las Migrations, de la plantilla. 

•	Asilamiento de Transacciones
o	Aplicar “<Proyecto>DataModule” el aislamiento de las transacciones de la base de datos de Oracle.
	Configuration.UnitOfWork.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;

4. Generar la migracion desde el proyecto   "<SchemaProyecto>.EntityFrameworkCore"
EntityFrameworkCore\Add-Migration init
5. Ejecutar el proyecto de Migracion "<Schema.Proyecto>.Platform.Migrator"  

•	Cambios *.test
o	Crear DbContext para verificar la conexión. 
